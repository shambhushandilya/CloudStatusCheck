<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Automatic Dragon Game</title>
    <style>
        body {
            background: #252830;
            margin: 0;
        }
        canvas {
            display: block;
            margin: 50px auto;
            background: #393e46;
            border-radius: 10px;
            box-shadow: 0 0 16px #000;
        }
    </style>
</head>
<body>
<canvas id="dragonGame" width="800" height="400"></canvas>
<script>
const canvas = document.getElementById('dragonGame');
const ctx = canvas.getContext('2d');

let dragon = {
    x: 100,
    y: 250,
    width: 140,
    height: 60,
    direction: 1, // 1 = right, -1 = left
    speed: 3,
    fireCooldown: 0
};

let fireballs = [];

function drawDragon(x, y) {
    // Body
    ctx.fillStyle = "#85d096";
    ctx.beginPath();
    ctx.ellipse(x, y, 60, 28, 0, 0, Math.PI * 2); // dragon belly
    ctx.fill();

    // Head
    ctx.fillStyle = "#9efffa";
    ctx.beginPath();
    ctx.arc(x + 60 * dragon.direction, y-12, 18, 0, Math.PI * 2);
    ctx.fill();

    // Eye
    ctx.fillStyle = "#252830";
    ctx.beginPath();
    ctx.arc(x + 70*dragon.direction, y-16, 4, 0, Math.PI * 2);
    ctx.fill();

    // Fire snout highlight
    ctx.fillStyle = "#f7d37f";
    ctx.beginPath();
    ctx.arc(x + 78*dragon.direction, y-10, 8, 0, Math.PI * 2);
    ctx.fill();

    // Wings
    ctx.strokeStyle = "#ffaae6";
    ctx.lineWidth = 2;
    ctx.beginPath();
    ctx.moveTo(x - 20, y - 20);
    ctx.lineTo(x - 40, y - 80);
    ctx.moveTo(x + 20, y - 20);
    ctx.lineTo(x + 70*dragon.direction, y - 60);
    ctx.stroke();

    // Tail
    ctx.strokeStyle = "#6ad1d9";
    ctx.beginPath();
    ctx.moveTo(x - 60*dragon.direction, y);
    ctx.lineTo(x - 90*dragon.direction, y + 30);
    ctx.stroke();
}

function drawFireball(fireball) {
    ctx.fillStyle = "#ff7625";
    ctx.beginPath();
    ctx.arc(fireball.x, fireball.y, 10, 0, Math.PI * 2);
    ctx.fill();
    ctx.strokeStyle = "#ffd900";
    ctx.beginPath();
    ctx.arc(fireball.x, fireball.y, 16, 0, Math.PI * 2);
    ctx.stroke();
}

function updateDragon() {
    dragon.x += dragon.speed * dragon.direction;
    // Change direction at screen edges
    if (dragon.x + dragon.width/2 > canvas.width) dragon.direction = -1;
    if (dragon.x - dragon.width/2 < 0) dragon.direction = 1;

    // Fire cooldown logic
    if (dragon.fireCooldown <= 0) {
        // Launch fireball
        fireballs.push({
            x: dragon.x + dragon.direction * 80,
            y: dragon.y - 10,
            dx: 7 * dragon.direction
        });
        dragon.fireCooldown = 80 + Math.random()*40; // about one second
    } else {
        dragon.fireCooldown -= 1;
    }
}

function updateFireballs() {
    for (let i = 0; i < fireballs.length; i++) {
        fireballs[i].x += fireballs[i].dx;
    }
    // Remove off-screen fireballs
    fireballs = fireballs.filter(fb =>
        fb.x > -40 && fb.x < canvas.width + 40
    );
}

function gameLoop() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawDragon(dragon.x, dragon.y);
    fireballs.forEach(drawFireball);
    updateDragon();
    updateFireballs();

    requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>
